(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(t,e,i){"use strict";i.r(e),i.d(e,"TrainingModule",(function(){return tt}));var n=i("PCNd"),c=i("tyNb"),a=i("fXoL"),r=i("vEl1"),s=i("ofXK"),o=i("wZkO"),b=i("a318"),l=i("v3mq"),u=i("CqG3"),m=i("y8OW"),p=i("l7P3"),d=i("XiUz"),f=i("3Pt+"),g=i("Wp6s"),h=i("kmnG"),y=i("d3UM"),x=i("FKr1"),T=i("Xa2L"),S=i("bTqV");function C(t,e){if(1&t&&(a.Ub(0,"mat-option",9),a.zc(1),a.Tb()),2&t){const t=e.$implicit;a.lc("value",t.id),a.Cb(1),a.Bc(" ",t.name," ")}}function v(t,e){if(1&t&&(a.Ub(0,"mat-form-field"),a.Ub(1,"mat-select",7),a.yc(2,C,2,2,"mat-option",8),a.Tb(),a.Tb()),2&t){const t=a.gc();a.Cb(2),a.lc("ngForOf",t.exercises)}}function U(t,e){1&t&&a.Pb(0,"mat-spinner")}function w(t,e){if(1&t&&(a.Ub(0,"button",12),a.zc(1,"Start"),a.Tb()),2&t){a.gc(2);const t=a.qc(2);a.lc("disabled",t.invalid)}}function I(t,e){if(1&t){const t=a.Vb();a.Ub(0,"button",13),a.cc("click",(function(){return a.sc(t),a.gc(2).fetchExercises()})),a.zc(1,"Fetch Again"),a.Tb()}}function O(t,e){if(1&t&&(a.Ub(0,"mat-card-actions",4),a.yc(1,w,2,1,"button",10),a.yc(2,I,2,0,"button",11),a.Tb()),2&t){const t=a.gc();a.Cb(1),a.lc("ngIf",t.exercises),a.Cb(1),a.lc("ngIf",!t.exercises)}}let z=(()=>{class t{constructor(t,e,i,n){this.trainingService=t,this.db=e,this.uiService=i,this.store=n}ngOnInit(){this.isLoading$=this.store.select(b.a),this.store.dispatch(new l.c),this.exerciseSubscription=this.trainingService.exercisesChanged.subscribe(t=>{this.exercises=t,this.store.dispatch(new l.d)}),this.fetchExercises()}fetchExercises(){this.trainingService.fetchAvaliableExercises()}onStartTraining(t){this.trainingService.startExercise(t.value.exercise)}ngOnDestroy(){this.exerciseSubscription&&this.exerciseSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(r.a),a.Ob(u.AngularFirestore),a.Ob(m.a),a.Ob(p.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-new-training"]],decls:13,vars:9,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex.xs","100%","fxFlex","400px"],["fxLayoutAlign","center"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["placeholder","Choose Exercise","ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-button","",3,"disabled",4,"ngIf"],["type","button","mat-button","",3,"click",4,"ngIf"],["type","submit","mat-button","",3,"disabled"],["type","button","mat-button","",3,"click"]],template:function(t,e){if(1&t){const t=a.Vb();a.Ub(0,"section",0),a.Ub(1,"form",1,2),a.cc("ngSubmit",(function(){a.sc(t);const i=a.qc(2);return e.onStartTraining(i)})),a.Ub(3,"mat-card",3),a.Ub(4,"mat-card-title",4),a.zc(5,"Time to start a workout!"),a.Tb(),a.Ub(6,"mat-card-content",4),a.yc(7,v,3,1,"mat-form-field",5),a.hc(8,"async"),a.yc(9,U,1,0,"mat-spinner",5),a.hc(10,"async"),a.Tb(),a.yc(11,O,3,2,"mat-card-actions",6),a.hc(12,"async"),a.Tb(),a.Tb(),a.Tb()}2&t&&(a.Cb(7),a.lc("ngIf",!a.ic(8,3,e.isLoading$)&&e.exercises),a.Cb(2),a.lc("ngIf",a.ic(10,5,e.isLoading$)),a.Cb(2),a.lc("ngIf",!a.ic(12,7,e.isLoading$)))},directives:[d.c,d.b,f.u,f.o,f.p,g.a,d.a,g.e,g.c,s.m,h.c,y.a,f.n,f.q,f.s,s.l,x.n,T.c,g.b,S.a],pipes:[s.b],styles:[".new-training[_ngcontent-%COMP%]{padding:30px}"]}),t})();var D=i("+0xr"),L=i("Dh3D"),E=i("M9IT"),A=i("qFsG");function F(t,e){1&t&&(a.Ub(0,"mat-header-cell",14),a.zc(1,"Date"),a.Tb())}function R(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.zc(1),a.hc(2,"date"),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.Ac(a.ic(2,1,t.date.toDate()))}}function P(t,e){1&t&&(a.Ub(0,"mat-header-cell",14),a.zc(1,"Name"),a.Tb())}function k(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.zc(1),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.Ac(t.name)}}function $(t,e){1&t&&(a.Ub(0,"mat-header-cell",14),a.zc(1,"Calories"),a.Tb())}function q(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.zc(1),a.hc(2,"number"),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.Ac(a.ic(2,1,t.calories))}}function G(t,e){1&t&&(a.Ub(0,"mat-header-cell",14),a.zc(1,"Duration"),a.Tb())}function M(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.zc(1),a.hc(2,"number"),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.Ac(a.ic(2,1,t.duration))}}function N(t,e){1&t&&(a.Ub(0,"mat-header-cell",14),a.zc(1,"State"),a.Tb())}function j(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.zc(1),a.Tb()),2&t){const t=e.$implicit;a.Cb(1),a.Ac(t.state)}}function B(t,e){1&t&&a.Pb(0,"mat-header-row")}function K(t,e){1&t&&a.Pb(0,"mat-row")}const V=function(){return[1,5,10,20]};let X=(()=>{class t{constructor(t){this.trainingService=t,this.displayedColumns=["date","name","duration","calories","state"],this.dataSource=new D.k}ngOnInit(){this.finishedExercisesSubscription=this.trainingService.finishedExercisesChanged.subscribe(t=>{this.dataSource.data=t}),this.trainingService.fetchCompletedOrCancelledExercises()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}doFilter(t){this.dataSource.filter=t.trim().toLowerCase()}ngOnDestroy(){this.finishedExercisesSubscription&&this.finishedExercisesSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(r.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-past-training"]],viewQuery:function(t,e){var i;1&t&&(a.Dc(L.a,!0),a.Dc(E.a,!0)),2&t&&(a.pc(i=a.dc())&&(e.sort=i.first),a.pc(i=a.dc())&&(e.paginator=i.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["matInput","","type","text","placeholder","Filter",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(t,e){1&t&&(a.Ub(0,"div",0),a.Ub(1,"mat-form-field",1),a.Ub(2,"input",2),a.cc("keyup",(function(t){return e.doFilter(t.target.value)})),a.Tb(),a.Tb(),a.Tb(),a.Ub(3,"mat-table",3),a.Sb(4,4),a.yc(5,F,2,0,"mat-header-cell",5),a.yc(6,R,3,3,"mat-cell",6),a.Rb(),a.Sb(7,7),a.yc(8,P,2,0,"mat-header-cell",5),a.yc(9,k,2,1,"mat-cell",6),a.Rb(),a.Sb(10,8),a.yc(11,$,2,0,"mat-header-cell",5),a.yc(12,q,3,3,"mat-cell",6),a.Rb(),a.Sb(13,9),a.yc(14,G,2,0,"mat-header-cell",5),a.yc(15,M,3,3,"mat-cell",6),a.Rb(),a.Sb(16,10),a.yc(17,N,2,0,"mat-header-cell",5),a.yc(18,j,2,1,"mat-cell",6),a.Rb(),a.yc(19,B,1,0,"mat-header-row",11),a.yc(20,K,1,0,"mat-row",12),a.Tb(),a.Pb(21,"mat-paginator",13)),2&t&&(a.Cb(3),a.lc("dataSource",e.dataSource),a.Cb(16),a.lc("matHeaderRowDef",e.displayedColumns),a.Cb(1),a.lc("matRowDefColumns",e.displayedColumns),a.Cb(1),a.lc("pageSize",10)("pageSizeOptions",a.mc(5,V)))},directives:[d.b,h.c,d.a,A.b,D.j,L.a,D.c,D.e,D.b,D.g,D.i,E.a,D.d,L.b,D.a,D.f,D.h],pipes:[s.e,s.f],styles:[""]}),t})();var H=i("0IaG");let J=(()=>{class t{constructor(t){this.passedData=t}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(H.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-stop-training"]],decls:11,vars:3,consts:[["mat-dialog-title",""],["fxLayout","column"],["fxLayout",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(a.Ub(0,"h1",0),a.zc(1,"Are you sure?"),a.Tb(),a.Ub(2,"mat-dialog-actions",1),a.Ub(3,"mat-dialog-content"),a.Ub(4,"p"),a.zc(5),a.Tb(),a.Tb(),a.Ub(6,"div",2),a.Ub(7,"button",3),a.zc(8,"Yes"),a.Tb(),a.Ub(9,"button",3),a.zc(10,"No"),a.Tb(),a.Tb(),a.Tb()),2&t&&(a.Cb(5),a.Bc("You already got ",e.passedData.progress,"%"),a.Cb(2),a.lc("mat-dialog-close",!0),a.Cb(2),a.lc("mat-dialog-close",!1))},directives:[H.g,H.c,d.c,H.e,S.a,H.d],encapsulation:2}),t})(),W=(()=>{class t{constructor(t,e){this.dialog=t,this.trainingService=e,this.progress=0,this.result=!1}ngOnInit(){this.startOrResumeTimer()}startOrResumeTimer(){const t=this.trainingService.getRunningExercise().duration/100*1e3;this.timer=setInterval(()=>{this.progress=this.progress+5,this.progress>=100&&(this.trainingService.completeExercise(),clearInterval(this.timer))},t)}onStop(){clearInterval(this.timer),this.dialog.open(J,{data:{progress:this.progress}}).afterClosed().subscribe(t=>{t?this.trainingService.cancelExercise(this.progress):this.startOrResumeTimer()})}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(H.b),a.Ob(r.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(a.Ub(0,"section",0),a.Pb(1,"mat-progress-spinner",1),a.Ub(2,"h1"),a.zc(3),a.Tb(),a.Ub(4,"p"),a.zc(5,"Keep on going you can do it"),a.Tb(),a.Ub(6,"button",2),a.cc("click",(function(){return e.onStop()})),a.zc(7,"Stop"),a.Tb(),a.Tb()),2&t&&(a.Cb(1),a.lc("value",e.progress),a.Cb(2),a.Bc("",e.progress,"%"))},directives:[d.c,d.b,T.a,S.a],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),t})();function Y(t,e){1&t&&(a.Ub(0,"mat-tab-group"),a.Ub(1,"mat-tab",1),a.Pb(2,"app-new-training"),a.Tb(),a.Ub(3,"mat-tab",2),a.Pb(4,"app-past-training"),a.Tb(),a.Tb())}function _(t,e){1&t&&a.Pb(0,"app-current-training")}const Q=[{path:"",component:(()=>{class t{constructor(t){this.trainingService=t,this.onGoingTraining=!1}ngOnInit(){this.exerciseSubscription=this.trainingService.exerciseChanged.subscribe(t=>{this.onGoingTraining=!!t})}ngOnDestroy(){this.exerciseSubscription&&this.exerciseSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(r.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-training"]],decls:2,vars:2,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercise"]],template:function(t,e){1&t&&(a.yc(0,Y,5,0,"mat-tab-group",0),a.yc(1,_,1,0,"app-current-training",0)),2&t&&(a.lc("ngIf",!e.onGoingTraining),a.Cb(1),a.lc("ngIf",e.onGoingTraining))},directives:[s.m,o.b,o.a,z,X,W],styles:[""]}),t})()}];let Z=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[c.c.forChild(Q)],c.c]}),t})(),tt=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[n.a,Z]]}),t})()}}]);