function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(e,t,n){"use strict";n.r(t),n.d(t,"TrainingModule",(function(){return se}));var i=n("PCNd"),c=n("tyNb"),a=n("fXoL"),r=n("vEl1"),s=n("ofXK"),o=n("wZkO"),l=n("a318"),u=n("v3mq"),b=n("CqG3"),f=n("y8OW"),m=n("l7P3"),p=n("XiUz"),d=n("3Pt+"),g=n("Wp6s"),h=n("kmnG"),y=n("d3UM"),v=n("FKr1"),C=n("Xa2L"),T=n("bTqV");function x(e,t){if(1&e&&(a.Ub(0,"mat-option",9),a.zc(1),a.Tb()),2&e){var n=t.$implicit;a.lc("value",n.id),a.Cb(1),a.Bc(" ",n.name," ")}}function S(e,t){if(1&e&&(a.Ub(0,"mat-form-field"),a.Ub(1,"mat-select",7),a.yc(2,x,2,2,"mat-option",8),a.Tb(),a.Tb()),2&e){var n=a.gc();a.Cb(2),a.lc("ngForOf",n.exercises)}}function U(e,t){1&e&&a.Pb(0,"mat-spinner")}function w(e,t){if(1&e&&(a.Ub(0,"button",12),a.zc(1,"Start"),a.Tb()),2&e){a.gc(2);var n=a.qc(2);a.lc("disabled",n.invalid)}}function k(e,t){if(1&e){var n=a.Vb();a.Ub(0,"button",13),a.cc("click",(function(){return a.sc(n),a.gc(2).fetchExercises()})),a.zc(1,"Fetch Again"),a.Tb()}}function O(e,t){if(1&e&&(a.Ub(0,"mat-card-actions",4),a.yc(1,w,2,1,"button",10),a.yc(2,k,2,0,"button",11),a.Tb()),2&e){var n=a.gc();a.Cb(1),a.lc("ngIf",n.exercises),a.Cb(1),a.lc("ngIf",!n.exercises)}}var I,z=((I=function(){function e(t,n,i,c){_classCallCheck(this,e),this.trainingService=t,this.db=n,this.uiService=i,this.store=c}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.isLoading$=this.store.select(l.a),this.store.dispatch(new u.c),this.exerciseSubscription=this.trainingService.exercisesChanged.subscribe((function(t){e.exercises=t,e.store.dispatch(new u.d)})),this.fetchExercises()}},{key:"fetchExercises",value:function(){this.trainingService.fetchAvaliableExercises()}},{key:"onStartTraining",value:function(e){this.trainingService.startExercise(e.value.exercise)}},{key:"ngOnDestroy",value:function(){this.exerciseSubscription&&this.exerciseSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||I)(a.Ob(r.a),a.Ob(b.AngularFirestore),a.Ob(f.a),a.Ob(m.a))},I.\u0275cmp=a.Ib({type:I,selectors:[["app-new-training"]],decls:13,vars:9,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex.xs","100%","fxFlex","400px"],["fxLayoutAlign","center"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["placeholder","Choose Exercise","ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-button","",3,"disabled",4,"ngIf"],["type","button","mat-button","",3,"click",4,"ngIf"],["type","submit","mat-button","",3,"disabled"],["type","button","mat-button","",3,"click"]],template:function(e,t){if(1&e){var n=a.Vb();a.Ub(0,"section",0),a.Ub(1,"form",1,2),a.cc("ngSubmit",(function(){a.sc(n);var e=a.qc(2);return t.onStartTraining(e)})),a.Ub(3,"mat-card",3),a.Ub(4,"mat-card-title",4),a.zc(5,"Time to start a workout!"),a.Tb(),a.Ub(6,"mat-card-content",4),a.yc(7,S,3,1,"mat-form-field",5),a.hc(8,"async"),a.yc(9,U,1,0,"mat-spinner",5),a.hc(10,"async"),a.Tb(),a.yc(11,O,3,2,"mat-card-actions",6),a.hc(12,"async"),a.Tb(),a.Tb(),a.Tb()}2&e&&(a.Cb(7),a.lc("ngIf",!a.ic(8,3,t.isLoading$)&&t.exercises),a.Cb(2),a.lc("ngIf",a.ic(10,5,t.isLoading$)),a.Cb(2),a.lc("ngIf",!a.ic(12,7,t.isLoading$)))},directives:[p.c,p.b,d.u,d.o,d.p,g.a,p.a,g.e,g.c,s.m,h.c,y.a,d.n,d.q,d.s,s.l,v.n,C.c,g.b,T.a],pipes:[s.b],styles:[".new-training[_ngcontent-%COMP%]{padding:30px}"]}),I),D=n("+0xr"),L=n("Dh3D"),E=n("M9IT"),P=n("qFsG");function _(e,t){1&e&&(a.Ub(0,"mat-header-cell",14),a.zc(1,"Date"),a.Tb())}function A(e,t){if(1&e&&(a.Ub(0,"mat-cell"),a.zc(1),a.hc(2,"date"),a.Tb()),2&e){var n=t.$implicit;a.Cb(1),a.Ac(a.ic(2,1,n.date.toDate()))}}function F(e,t){1&e&&(a.Ub(0,"mat-header-cell",14),a.zc(1,"Name"),a.Tb())}function R(e,t){if(1&e&&(a.Ub(0,"mat-cell"),a.zc(1),a.Tb()),2&e){var n=t.$implicit;a.Cb(1),a.Ac(n.name)}}function $(e,t){1&e&&(a.Ub(0,"mat-header-cell",14),a.zc(1,"Calories"),a.Tb())}function q(e,t){if(1&e&&(a.Ub(0,"mat-cell"),a.zc(1),a.hc(2,"number"),a.Tb()),2&e){var n=t.$implicit;a.Cb(1),a.Ac(a.ic(2,1,n.calories))}}function G(e,t){1&e&&(a.Ub(0,"mat-header-cell",14),a.zc(1,"Duration"),a.Tb())}function M(e,t){if(1&e&&(a.Ub(0,"mat-cell"),a.zc(1),a.hc(2,"number"),a.Tb()),2&e){var n=t.$implicit;a.Cb(1),a.Ac(a.ic(2,1,n.duration))}}function j(e,t){1&e&&(a.Ub(0,"mat-header-cell",14),a.zc(1,"State"),a.Tb())}function N(e,t){if(1&e&&(a.Ub(0,"mat-cell"),a.zc(1),a.Tb()),2&e){var n=t.$implicit;a.Cb(1),a.Ac(n.state)}}function B(e,t){1&e&&a.Pb(0,"mat-header-row")}function K(e,t){1&e&&a.Pb(0,"mat-row")}var V,X,H,J=function(){return[1,5,10,20]},W=((V=function(){function e(t){_classCallCheck(this,e),this.trainingService=t,this.displayedColumns=["date","name","duration","calories","state"],this.dataSource=new D.k}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.finishedExercisesSubscription=this.trainingService.finishedExercisesChanged.subscribe((function(t){e.dataSource.data=t})),this.trainingService.fetchCompletedOrCancelledExercises()}},{key:"ngAfterViewInit",value:function(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}},{key:"doFilter",value:function(e){this.dataSource.filter=e.trim().toLowerCase()}},{key:"ngOnDestroy",value:function(){this.finishedExercisesSubscription&&this.finishedExercisesSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||V)(a.Ob(r.a))},V.\u0275cmp=a.Ib({type:V,selectors:[["app-past-training"]],viewQuery:function(e,t){var n;1&e&&(a.Dc(L.a,!0),a.Dc(E.a,!0)),2&e&&(a.pc(n=a.dc())&&(t.sort=n.first),a.pc(n=a.dc())&&(t.paginator=n.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["matInput","","type","text","placeholder","Filter",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.Ub(1,"mat-form-field",1),a.Ub(2,"input",2),a.cc("keyup",(function(e){return t.doFilter(e.target.value)})),a.Tb(),a.Tb(),a.Tb(),a.Ub(3,"mat-table",3),a.Sb(4,4),a.yc(5,_,2,0,"mat-header-cell",5),a.yc(6,A,3,3,"mat-cell",6),a.Rb(),a.Sb(7,7),a.yc(8,F,2,0,"mat-header-cell",5),a.yc(9,R,2,1,"mat-cell",6),a.Rb(),a.Sb(10,8),a.yc(11,$,2,0,"mat-header-cell",5),a.yc(12,q,3,3,"mat-cell",6),a.Rb(),a.Sb(13,9),a.yc(14,G,2,0,"mat-header-cell",5),a.yc(15,M,3,3,"mat-cell",6),a.Rb(),a.Sb(16,10),a.yc(17,j,2,0,"mat-header-cell",5),a.yc(18,N,2,1,"mat-cell",6),a.Rb(),a.yc(19,B,1,0,"mat-header-row",11),a.yc(20,K,1,0,"mat-row",12),a.Tb(),a.Pb(21,"mat-paginator",13)),2&e&&(a.Cb(3),a.lc("dataSource",t.dataSource),a.Cb(16),a.lc("matHeaderRowDef",t.displayedColumns),a.Cb(1),a.lc("matRowDefColumns",t.displayedColumns),a.Cb(1),a.lc("pageSize",10)("pageSizeOptions",a.mc(5,J)))},directives:[p.b,h.c,p.a,P.b,D.j,L.a,D.c,D.e,D.b,D.g,D.i,E.a,D.d,L.b,D.a,D.f,D.h],pipes:[s.e,s.f],styles:[""]}),V),Y=n("0IaG"),Q=((H=function e(t){_classCallCheck(this,e),this.passedData=t}).\u0275fac=function(e){return new(e||H)(a.Ob(Y.a))},H.\u0275cmp=a.Ib({type:H,selectors:[["app-stop-training"]],decls:11,vars:3,consts:[["mat-dialog-title",""],["fxLayout","column"],["fxLayout",""],["mat-button","",3,"mat-dialog-close"]],template:function(e,t){1&e&&(a.Ub(0,"h1",0),a.zc(1,"Are you sure?"),a.Tb(),a.Ub(2,"mat-dialog-actions",1),a.Ub(3,"mat-dialog-content"),a.Ub(4,"p"),a.zc(5),a.Tb(),a.Tb(),a.Ub(6,"div",2),a.Ub(7,"button",3),a.zc(8,"Yes"),a.Tb(),a.Ub(9,"button",3),a.zc(10,"No"),a.Tb(),a.Tb(),a.Tb()),2&e&&(a.Cb(5),a.Bc("You already got ",t.passedData.progress,"%"),a.Cb(2),a.lc("mat-dialog-close",!0),a.Cb(2),a.lc("mat-dialog-close",!1))},directives:[Y.g,Y.c,p.c,Y.e,T.a,Y.d],encapsulation:2}),H),Z=((X=function(){function e(t,n){_classCallCheck(this,e),this.dialog=t,this.trainingService=n,this.progress=0,this.result=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.startOrResumeTimer()}},{key:"startOrResumeTimer",value:function(){var e=this,t=this.trainingService.getRunningExercise().duration/100*1e3;this.timer=setInterval((function(){e.progress=e.progress+5,e.progress>=100&&(e.trainingService.completeExercise(),clearInterval(e.timer))}),t)}},{key:"onStop",value:function(){var e=this;clearInterval(this.timer),this.dialog.open(Q,{data:{progress:this.progress}}).afterClosed().subscribe((function(t){t?e.trainingService.cancelExercise(e.progress):e.startOrResumeTimer()}))}}]),e}()).\u0275fac=function(e){return new(e||X)(a.Ob(Y.b),a.Ob(r.a))},X.\u0275cmp=a.Ib({type:X,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(a.Ub(0,"section",0),a.Pb(1,"mat-progress-spinner",1),a.Ub(2,"h1"),a.zc(3),a.Tb(),a.Ub(4,"p"),a.zc(5,"Keep on going you can do it"),a.Tb(),a.Ub(6,"button",2),a.cc("click",(function(){return t.onStop()})),a.zc(7,"Stop"),a.Tb(),a.Tb()),2&e&&(a.Cb(1),a.lc("value",t.progress),a.Cb(2),a.Bc("",t.progress,"%"))},directives:[p.c,p.b,C.a,T.a],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),X);function ee(e,t){1&e&&(a.Ub(0,"mat-tab-group"),a.Ub(1,"mat-tab",1),a.Pb(2,"app-new-training"),a.Tb(),a.Ub(3,"mat-tab",2),a.Pb(4,"app-past-training"),a.Tb(),a.Tb())}function te(e,t){1&e&&a.Pb(0,"app-current-training")}var ne,ie,ce,ae=[{path:"",component:(ne=function(){function e(t){_classCallCheck(this,e),this.trainingService=t,this.onGoingTraining=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.exerciseSubscription=this.trainingService.exerciseChanged.subscribe((function(t){e.onGoingTraining=!!t}))}},{key:"ngOnDestroy",value:function(){this.exerciseSubscription&&this.exerciseSubscription.unsubscribe()}}]),e}(),ne.\u0275fac=function(e){return new(e||ne)(a.Ob(r.a))},ne.\u0275cmp=a.Ib({type:ne,selectors:[["app-training"]],decls:2,vars:2,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercise"]],template:function(e,t){1&e&&(a.yc(0,ee,5,0,"mat-tab-group",0),a.yc(1,te,1,0,"app-current-training",0)),2&e&&(a.lc("ngIf",!t.onGoingTraining),a.Cb(1),a.lc("ngIf",t.onGoingTraining))},directives:[s.m,o.b,o.a,z,W,Z],styles:[""]}),ne)}],re=((ce=function e(){_classCallCheck(this,e)}).\u0275mod=a.Mb({type:ce}),ce.\u0275inj=a.Lb({factory:function(e){return new(e||ce)},imports:[[c.c.forChild(ae)],c.c]}),ce),se=((ie=function e(){_classCallCheck(this,e)}).\u0275mod=a.Mb({type:ie}),ie.\u0275inj=a.Lb({factory:function(e){return new(e||ie)},imports:[[i.a,re]]}),ie)}}]);