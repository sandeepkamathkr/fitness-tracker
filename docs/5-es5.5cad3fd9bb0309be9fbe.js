function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(e,t,i){"use strict";i.r(t),i.d(t,"TrainingModule",(function(){return ae}));var n=i("PCNd"),a=i("tyNb"),c=i("fXoL"),r=i("vEl1"),s=i("ofXK"),o=i("wZkO"),l=i("CqG3"),u=i("y8OW"),b=i("XiUz"),f=i("3Pt+"),m=i("Wp6s"),p=i("kmnG"),d=i("d3UM"),g=i("FKr1"),h=i("Xa2L"),v=i("bTqV");function y(e,t){if(1&e&&(c.Ub(0,"mat-option",9),c.zc(1),c.Tb()),2&e){var i=t.$implicit;c.lc("value",i.id),c.Cb(1),c.Bc(" ",i.name," ")}}function C(e,t){if(1&e&&(c.Ub(0,"mat-form-field"),c.Ub(1,"mat-select",7),c.yc(2,y,2,2,"mat-option",8),c.Tb(),c.Tb()),2&e){var i=c.gc();c.Cb(2),c.lc("ngForOf",i.exercises)}}function S(e,t){1&e&&c.Pb(0,"mat-spinner")}function T(e,t){if(1&e&&(c.Ub(0,"button",12),c.zc(1,"Start"),c.Tb()),2&e){c.gc(2);var i=c.qc(2);c.lc("disabled",i.invalid)}}function x(e,t){if(1&e){var i=c.Vb();c.Ub(0,"button",13),c.cc("click",(function(){return c.sc(i),c.gc(2).fetchExercises()})),c.zc(1,"Fetch Again"),c.Tb()}}function U(e,t){if(1&e&&(c.Ub(0,"mat-card-actions",4),c.yc(1,T,2,1,"button",10),c.yc(2,x,2,0,"button",11),c.Tb()),2&e){var i=c.gc();c.Cb(1),c.lc("ngIf",i.exercises),c.Cb(1),c.lc("ngIf",!i.exercises)}}var w,k=((w=function(){function e(t,i,n){_classCallCheck(this,e),this.trainingService=t,this.db=i,this.uiService=n,this.isLoading=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loadingSubscription=this.uiService.loadingStateChanged.subscribe((function(t){e.isLoading=t})),this.exerciseSubscription=this.trainingService.exercisesChanged.subscribe((function(t){e.exercises=t,e.isLoading=!1})),this.fetchExercises()}},{key:"fetchExercises",value:function(){this.trainingService.fetchAvaliableExercises()}},{key:"onStartTraining",value:function(e){this.trainingService.startExercise(e.value.exercise)}},{key:"ngOnDestroy",value:function(){this.exerciseSubscription&&this.exerciseSubscription.unsubscribe(),this.loadingSubscription&&this.loadingSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||w)(c.Ob(r.a),c.Ob(l.AngularFirestore),c.Ob(u.a))},w.\u0275cmp=c.Ib({type:w,selectors:[["app-new-training"]],decls:10,vars:3,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex.xs","100%","fxFlex","400px"],["fxLayoutAlign","center"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["placeholder","Choose Exercise","ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-button","",3,"disabled",4,"ngIf"],["type","button","mat-button","",3,"click",4,"ngIf"],["type","submit","mat-button","",3,"disabled"],["type","button","mat-button","",3,"click"]],template:function(e,t){if(1&e){var i=c.Vb();c.Ub(0,"section",0),c.Ub(1,"form",1,2),c.cc("ngSubmit",(function(){c.sc(i);var e=c.qc(2);return t.onStartTraining(e)})),c.Ub(3,"mat-card",3),c.Ub(4,"mat-card-title",4),c.zc(5,"Time to start a workout!"),c.Tb(),c.Ub(6,"mat-card-content",4),c.yc(7,C,3,1,"mat-form-field",5),c.yc(8,S,1,0,"mat-spinner",5),c.Tb(),c.yc(9,U,3,2,"mat-card-actions",6),c.Tb(),c.Tb(),c.Tb()}2&e&&(c.Cb(7),c.lc("ngIf",!t.isLoading&&t.exercises),c.Cb(1),c.lc("ngIf",t.isLoading),c.Cb(1),c.lc("ngIf",!t.isLoading))},directives:[b.c,b.b,f.u,f.o,f.p,m.a,b.a,m.e,m.c,s.m,p.c,d.a,f.n,f.q,f.s,s.l,g.n,h.c,m.b,v.a],styles:[".new-training[_ngcontent-%COMP%]{padding:30px}"]}),w),I=i("+0xr"),O=i("Dh3D"),z=i("M9IT"),D=i("qFsG");function L(e,t){1&e&&(c.Ub(0,"mat-header-cell",14),c.zc(1,"Date"),c.Tb())}function E(e,t){if(1&e&&(c.Ub(0,"mat-cell"),c.zc(1),c.hc(2,"date"),c.Tb()),2&e){var i=t.$implicit;c.Cb(1),c.Ac(c.ic(2,1,i.date.toDate()))}}function _(e,t){1&e&&(c.Ub(0,"mat-header-cell",14),c.zc(1,"Name"),c.Tb())}function P(e,t){if(1&e&&(c.Ub(0,"mat-cell"),c.zc(1),c.Tb()),2&e){var i=t.$implicit;c.Cb(1),c.Ac(i.name)}}function A(e,t){1&e&&(c.Ub(0,"mat-header-cell",14),c.zc(1,"Calories"),c.Tb())}function F(e,t){if(1&e&&(c.Ub(0,"mat-cell"),c.zc(1),c.hc(2,"number"),c.Tb()),2&e){var i=t.$implicit;c.Cb(1),c.Ac(c.ic(2,1,i.calories))}}function R(e,t){1&e&&(c.Ub(0,"mat-header-cell",14),c.zc(1,"Duration"),c.Tb())}function G(e,t){if(1&e&&(c.Ub(0,"mat-cell"),c.zc(1),c.hc(2,"number"),c.Tb()),2&e){var i=t.$implicit;c.Cb(1),c.Ac(c.ic(2,1,i.duration))}}function M(e,t){1&e&&(c.Ub(0,"mat-header-cell",14),c.zc(1,"State"),c.Tb())}function q(e,t){if(1&e&&(c.Ub(0,"mat-cell"),c.zc(1),c.Tb()),2&e){var i=t.$implicit;c.Cb(1),c.Ac(i.state)}}function $(e,t){1&e&&c.Pb(0,"mat-header-row")}function j(e,t){1&e&&c.Pb(0,"mat-row")}var N,B,K,V=function(){return[1,5,10,20]},X=((N=function(){function e(t){_classCallCheck(this,e),this.trainingService=t,this.displayedColumns=["date","name","duration","calories","state"],this.dataSource=new I.k}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.finishedExercisesSubscription=this.trainingService.finishedExercisesChanged.subscribe((function(t){e.dataSource.data=t})),this.trainingService.fetchCompletedOrCancelledExercises()}},{key:"ngAfterViewInit",value:function(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}},{key:"doFilter",value:function(e){this.dataSource.filter=e.trim().toLowerCase()}},{key:"ngOnDestroy",value:function(){this.finishedExercisesSubscription&&this.finishedExercisesSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||N)(c.Ob(r.a))},N.\u0275cmp=c.Ib({type:N,selectors:[["app-past-training"]],viewQuery:function(e,t){var i;1&e&&(c.Dc(O.a,!0),c.Dc(z.a,!0)),2&e&&(c.pc(i=c.dc())&&(t.sort=i.first),c.pc(i=c.dc())&&(t.paginator=i.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["matInput","","type","text","placeholder","Filter",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(e,t){1&e&&(c.Ub(0,"div",0),c.Ub(1,"mat-form-field",1),c.Ub(2,"input",2),c.cc("keyup",(function(e){return t.doFilter(e.target.value)})),c.Tb(),c.Tb(),c.Tb(),c.Ub(3,"mat-table",3),c.Sb(4,4),c.yc(5,L,2,0,"mat-header-cell",5),c.yc(6,E,3,3,"mat-cell",6),c.Rb(),c.Sb(7,7),c.yc(8,_,2,0,"mat-header-cell",5),c.yc(9,P,2,1,"mat-cell",6),c.Rb(),c.Sb(10,8),c.yc(11,A,2,0,"mat-header-cell",5),c.yc(12,F,3,3,"mat-cell",6),c.Rb(),c.Sb(13,9),c.yc(14,R,2,0,"mat-header-cell",5),c.yc(15,G,3,3,"mat-cell",6),c.Rb(),c.Sb(16,10),c.yc(17,M,2,0,"mat-header-cell",5),c.yc(18,q,2,1,"mat-cell",6),c.Rb(),c.yc(19,$,1,0,"mat-header-row",11),c.yc(20,j,1,0,"mat-row",12),c.Tb(),c.Pb(21,"mat-paginator",13)),2&e&&(c.Cb(3),c.lc("dataSource",t.dataSource),c.Cb(16),c.lc("matHeaderRowDef",t.displayedColumns),c.Cb(1),c.lc("matRowDefColumns",t.displayedColumns),c.Cb(1),c.lc("pageSize",10)("pageSizeOptions",c.mc(5,V)))},directives:[b.b,p.c,b.a,D.b,I.j,O.a,I.c,I.e,I.b,I.g,I.i,z.a,I.d,O.b,I.a,I.f,I.h],pipes:[s.e,s.f],styles:[""]}),N),H=i("0IaG"),J=((K=function e(t){_classCallCheck(this,e),this.passedData=t}).\u0275fac=function(e){return new(e||K)(c.Ob(H.a))},K.\u0275cmp=c.Ib({type:K,selectors:[["app-stop-training"]],decls:11,vars:3,consts:[["mat-dialog-title",""],["fxLayout","column"],["fxLayout",""],["mat-button","",3,"mat-dialog-close"]],template:function(e,t){1&e&&(c.Ub(0,"h1",0),c.zc(1,"Are you sure?"),c.Tb(),c.Ub(2,"mat-dialog-actions",1),c.Ub(3,"mat-dialog-content"),c.Ub(4,"p"),c.zc(5),c.Tb(),c.Tb(),c.Ub(6,"div",2),c.Ub(7,"button",3),c.zc(8,"Yes"),c.Tb(),c.Ub(9,"button",3),c.zc(10,"No"),c.Tb(),c.Tb(),c.Tb()),2&e&&(c.Cb(5),c.Bc("You already got ",t.passedData.progress,"%"),c.Cb(2),c.lc("mat-dialog-close",!0),c.Cb(2),c.lc("mat-dialog-close",!1))},directives:[H.g,H.c,b.c,H.e,v.a,H.d],encapsulation:2}),K),W=((B=function(){function e(t,i){_classCallCheck(this,e),this.dialog=t,this.trainingService=i,this.progress=0,this.result=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.startOrResumeTimer()}},{key:"startOrResumeTimer",value:function(){var e=this,t=this.trainingService.getRunningExercise().duration/100*1e3;this.timer=setInterval((function(){e.progress=e.progress+5,e.progress>=100&&(e.trainingService.completeExercise(),clearInterval(e.timer))}),t)}},{key:"onStop",value:function(){var e=this;clearInterval(this.timer),this.dialog.open(J,{data:{progress:this.progress}}).afterClosed().subscribe((function(t){t?e.trainingService.cancelExercise(e.progress):e.startOrResumeTimer()}))}}]),e}()).\u0275fac=function(e){return new(e||B)(c.Ob(H.b),c.Ob(r.a))},B.\u0275cmp=c.Ib({type:B,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(c.Ub(0,"section",0),c.Pb(1,"mat-progress-spinner",1),c.Ub(2,"h1"),c.zc(3),c.Tb(),c.Ub(4,"p"),c.zc(5,"Keep on going you can do it"),c.Tb(),c.Ub(6,"button",2),c.cc("click",(function(){return t.onStop()})),c.zc(7,"Stop"),c.Tb(),c.Tb()),2&e&&(c.Cb(1),c.lc("value",t.progress),c.Cb(2),c.Bc("",t.progress,"%"))},directives:[b.c,b.b,h.a,v.a],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),B);function Y(e,t){1&e&&(c.Ub(0,"mat-tab-group"),c.Ub(1,"mat-tab",1),c.Pb(2,"app-new-training"),c.Tb(),c.Ub(3,"mat-tab",2),c.Pb(4,"app-past-training"),c.Tb(),c.Tb())}function Q(e,t){1&e&&c.Pb(0,"app-current-training")}var Z,ee,te,ie=[{path:"",component:(Z=function(){function e(t){_classCallCheck(this,e),this.trainingService=t,this.onGoingTraining=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.exerciseSubscription=this.trainingService.exerciseChanged.subscribe((function(t){e.onGoingTraining=!!t}))}},{key:"ngOnDestroy",value:function(){this.exerciseSubscription&&this.exerciseSubscription.unsubscribe()}}]),e}(),Z.\u0275fac=function(e){return new(e||Z)(c.Ob(r.a))},Z.\u0275cmp=c.Ib({type:Z,selectors:[["app-training"]],decls:2,vars:2,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercise"]],template:function(e,t){1&e&&(c.yc(0,Y,5,0,"mat-tab-group",0),c.yc(1,Q,1,0,"app-current-training",0)),2&e&&(c.lc("ngIf",!t.onGoingTraining),c.Cb(1),c.lc("ngIf",t.onGoingTraining))},directives:[s.m,o.b,o.a,k,X,W],styles:[""]}),Z)}],ne=((te=function e(){_classCallCheck(this,e)}).\u0275mod=c.Mb({type:te}),te.\u0275inj=c.Lb({factory:function(e){return new(e||te)},imports:[[a.c.forChild(ie)],a.c]}),te),ae=((ee=function e(){_classCallCheck(this,e)}).\u0275mod=c.Mb({type:ee}),ee.\u0275inj=c.Lb({factory:function(e){return new(e||ee)},imports:[[n.a,ne]]}),ee)}}]);